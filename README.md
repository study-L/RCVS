# RCVS：面向视频流的统一配准与融合框架

## 摘要
红外与可见光的跨模态配准与融合可生成更全面的场景信息表示。现有框架主要针对静态图像对设计，忽略了视频流在实际部署中的稳定性问题，导致融合伪影和帧间抖动。本文提出 **RCVS**，通过鲁棒匹配器和时空校准模块（STC）实现稳定配准，并结合轻量级融合网络输出实时融合视频。此外，我们构建了高质量红外-可见光视频数据集 **HDO**，为领域内首个兼顾稳定性和实时性的基准。

**关键词**：视频配准、视频融合、多模态、数据集

---

## 1. 介绍
### 问题背景
- 高质量视频成像是计算机视觉应用（如目标检测、语义分割）的基础。
- 单一模态易受环境干扰，红外与可见光融合可提供全天候成像能力。
- **现有不足**：
  - 静态图像配准方法在视频流中表现不稳定（特征点分布不一致、退化场景性能差、实时性不足）。
  - 缺乏高质量视频数据集（现有如TNO、MSRS等多为图像对）。

### 解决方案
- **RCVS框架**：
  1. **鲁棒匹配器**：跨模态训练，适应非线性强度差异。
  2. **STC模块**：利用时空约束平滑帧间变换参数。
  3. **高效融合网络（EIF）**：轻量级结构实现实时融合。
- **HDO数据集**：
  - 高分辨率（红外1280×1024，可见光1920×1080）。
  - 包含7500对视频帧，覆盖多样场景（强光/弱光、动态/静态）。

---

## 2. 相关工作
### 跨模态配准
- **传统方法**：SIFT、RIFT等依赖模态不变特征，但对噪声敏感。
- **深度学习方法**：SuperPoint、LoFTR利用Transformer提升匹配精度。

### 端到端配准与融合
- **UMF-CMGR**：通过风格迁移将跨模态问题转为单模态。
- **SuperFusion**：双向变形场配准+语义指导融合。

### 现有数据集
| 数据集  | 类型       | 局限性                  |
|---------|------------|-------------------------|
| TNO     | 军事场景   | 仅静态图像              |
| FLIR    | 道路视频   | 分辨率低，退化场景多    |
| HDO（本文） | 多场景视频 | 高分辨率，时空对齐      |

---

## 3. 方法
### 整体流程
1. **初始配准**：基于MatchFormer的轻量级匹配器提取密集特征，结合空间分布网格增强位置感知。
2. **时空校准（STC）**：跟踪连续帧特征点，动态更新变换参数。
3. **高效融合（EIF）**：双分支生成器保留模态互补信息，判别器优化特征保留。

### 关键技术
- **跨模态训练策略**：  
  使用CPSTN生成伪红外图像（COCO数据集+随机投影变换），解决真实数据不足问题。
- **损失函数**：  
  - 生成器：SSIM损失（结构相似性）+ 梯度损失（纹理保留）+ 对抗损失。
  - 判别器：分类损失。

---

## 4. HDO数据集
| 特性               | 描述                              |
|--------------------|-----------------------------------|
| 分辨率             | 红外1280×1024，可见光1920×1080   |
| 视频帧对数         | 7500对（含5788对手动对齐数据）    |
| 场景覆盖           | 强光/弱光、行人/车辆、动态/静态  |
| 应用场景           | 检测、跟踪、分割等高级视觉任务    |

---

## 5. 实验
### 结果对比
- **配准精度**：  
  RCVS在HDO和FLIR数据集上重投影误差（RE）最低（较LoFTR降低23%）。
- **融合质量**：  
  定量指标（EN、VIF等）优于SuperFusion（见表IV）。
- **实时性**：  
  配准速度38.34%↑（vs MatchFormer），端到端管道速度40.09%↑（vs ReCoNet）。

### 应用展示
- **目标检测**：YOLOv7在RCVS融合视频上误检率降低17%。  
- **姿态估计**：ViTPose关键点准确率提升12%。  

---

## 6. 结论
- RCVS首次实现视频流的稳定配准与实时融合。
- HDO数据集填补了高质量红外-可见光视频基准的空白。
- **未来方向**：优化计算效率，适配边缘设备部署。

## 7. 运行环境
![配准和融合结果](https://youke1.picui.cn/s1/2025/09/09/68c00fa31141e.jpg)  
### 硬件配置
- CPU: Intel Core i5-12600kf @ 3.60GHz  
- GPU: 2× NVIDIA GeForce RTX 3060 12GB  
- 内存: 32GB DDR4  

### 软件环境
```bash
# 虚拟环境及核心依赖
conda create -n pytorch python=3.8 -y
conda activate pytorch
pip install torch==1.12.1+cu113 torchvision==0.13.1+cu113 -f https://download.pytorch.org/whl/torch_stable.html
pip install opencv-python==4.5.5 numpy==1.21.6 timm==0.6.12
